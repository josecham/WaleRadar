<script type="text/babel">
    const { useState, useEffect } = React;

    const WhaleRadarApp = () => {
        // ... (estados anteriores)
        const [stats, setStats] = useState({ buyVol: 0, sellVol: 0 });
        const [megaWhaleCount, setMegaWhaleCount] = useState(0);

        // Lógica de cálculo de poder
        useEffect(() => {
            if (!events.length) return;
            const buy = events.filter(e => e.action.type === 'BULL').reduce((acc, e) => acc + parseFloat(e.amount.replace(/,/g, '')), 0);
            const sell = events.filter(e => e.action.type === 'BEAR').reduce((acc, e) => acc + parseFloat(e.amount.replace(/,/g, '')), 0);
            setStats({ buyVol: buy, sellVol: sell });
        }, [events]);

        // ... (dentro del return, después del Gauge de sentimiento)
        
        return (
            // ... resto del código
            
            {/* NUEVA BARRA DE PODER INSTITUCIONAL */}
            <div className="whale-card p-5 rounded-[2rem] mb-6 border-white/5">
                <div className="flex justify-between text-[10px] mono mb-2 uppercase tracking-widest font-bold">
                    <span className="text-green-400">Bulls Power</span>
                    <span className="text-red-400">Bears Power</span>
                </div>
                <div className="w-full h-3 bg-gray-900 rounded-full overflow-hidden flex">
                    <div 
                        className="h-full bg-green-500 transition-all duration-700" 
                        style={{ width: `${(stats.buyVol / (stats.buyVol + stats.sellVol)) * 100 || 50}%` }}
                    ></div>
                    <div 
                        className="h-full bg-red-500 transition-all duration-700" 
                        style={{ width: `${(stats.sellVol / (stats.buyVol + stats.sellVol)) * 100 || 50}%` }}
                    ></div>
                </div>
                <div className="flex justify-between mt-2 text-[9px] mono opacity-50 font-bold">
                    <span>{stats.buyVol.toFixed(2)} BTC</span>
                    <span>{stats.sellVol.toFixed(2)} BTC</span>
                </div>
            </div>

            {/* CONTADOR DE MEGA BALLENAS */}
            <div className="flex gap-4 mb-6">
                <div className="flex-1 whale-card p-4 rounded-3xl text-center">
                    <p className="text-[8px] uppercase text-gray-500 mb-1 font-bold">Mega Whales (Today)</p>
                    <p className="text-xl font-black text-blue-400">{megaWhaleCount}</p>
                </div>
                <div className="flex-1 whale-card p-4 rounded-3xl text-center">
                    <p className="text-[8px] uppercase text-gray-500 mb-1 font-bold">Avg Block Size</p>
                    <p className="text-xl font-black text-white">{( (stats.buyVol + stats.sellVol) / 10).toFixed(1)}</p>
                </div>
            </div>
            
            // ... resto del monitor
        );
    };
</script>
